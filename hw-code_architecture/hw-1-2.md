Пример из контроллера на Yii2, в котором нарушаются принципы DI и Open-closed.
Проблема — метод зависит от класса MembersSearch. Для того чтобы избавится от зависимости конкретного класса, надо сделать так, чтобы метод actionIndex зависел от абстракции, т.е. от интерфейса MembersSearchInterface.

```php
    /**
     * @return string
     */
    public function actionIndex()
    {
        $searchModel = new MembersSearch();
        $params = \Yii::$app->request->queryParams;

        $model = $searchModel->search($params);

        return $this->render('index', [
            'model' => $model,
        ]);
    }
```

Похожий пример, только тут ещё нарушается принцип SRP.
Необходимо вынести работу с моделью в репозиторий, в репозитории можно реализовать шаблон "Строитель".  

```php
    public function actionAdd()
    {
        $model = new Pages();

        $model->id = \Yii::$app->security->generateRandomString(3);
        $model->title = 'Заголовок новости';
        $model->group = 3;
        $model->type = 'news';

        $model->save();

        return $this->render('edit', [
            'model' => $model,
        ]);
    }
```